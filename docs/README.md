# syncany

简单易用的数据同步导出框架。

在构建ETL和报表系统的过程中，存在大量需要从各个子系统收集整理数据的过程，常规写同步脚本非常繁琐。

syncany支持从mysql、mongodb、postgresql、execl等数据源读入数据，同时支持从不同DB，不同数据库类型读入关联数据，完成关联字段转义。

同时支持把数据输出到mysql、mongodb、postgresql、execl等，配合superset等图形报表框架，数分钟并可完成复杂报表分析系统搭建。

# 数据类型

1. 常量
	
	如： "a"、0、3.4、[1, 2]
	
2. 引用数据源数据(如：$.a)

	返回数据源某行数据中某个值

# 操作符说明

1. “$”操作符
	
	数据引用，始终指向最后一次加载的数据的当前行
	
2. “&”操作符
	
	数据源操作符，引用数据库
	
3. “|”操作符
	
	过滤器，对输出数据进行处理返回预期数据，可以用在@和$返回数据之后
	
4. “@”操作符

	计算操作符，对返回数据进行再计算处理，可以用户$引用数据和常量数据
	
# 表达式

## 常量

```
0 # 数值常量
'a' # 字符串常量
3.2 # 浮点数
[1, 2, 3] # 数组
```

## 数据源数据

```
$.a # 返回当前a的值
$.a.b # 返回当前a的子文档b的值
$.a.:1 # 返回当前a数组的第一项值
$.a.:1: # 返回当前a数组的第一项到最后一项之间的值
```

## 链接查询

```
["$.a", "&.json.status.json::status", "$.name"] # 用当前a的值关联json文件夹下status.json的status值，返回name

["$.a", "&.mongo_user.user::_id", [
	"$.status", "&.json.status.json::status", "$.name"
]]
```

## 计算

```
["@add", "$.a", 1] # 当前a的值加一

["@mul", "$.a", [
	["@add", "$.a", 1]
]] # 当前a的值加一再乘以a
```